<div class="box-rightWrap">
	<span class="box-header-title box-header-title--full box-header-title--push">
		<span data-i18n="messages.newMessage"></span>
		<div class="box-header-buttons--right">
			<a whispeer-sref="app.messages.list" id="showTopics" class="box-header-button box-header-button--right" data-ng-if="mobile">
				<i class="fa fa-arrow-left fa-fw"></i>
			</a>
		</div>
	</span>
	<div id="topicWrap" class="newMessage">
		<search data-supplier="userSearchSupplier" callback="create.setUsers(selected)" data-search-template="userSimple" data-multiple data-input-i18n-attr="messages.search|placeholder" data-base="user" data-initial-values="getInitialUser()"></search>
		<form id="inputWrap">
			<div class="annotatedInput-container annotatedInput-container--button annotatedInput--reversed" id="messageInput">
				<div class="uploadForm annotatedInput-button">
					<button class="uploadForm-button btn"><i class="fa fa-upload"></i></button>
					<input class="uploadForm-theForm" type="file" data-file="create.addImages" width="4000">
				</div>
				<textarea id="messageView-messageInput" data-advancedsend="create.send(create.users, create.text, create.images)" type="text" data-i18n-attr="messages.sendMessage.text|placeholder" class="annotatedInput-input" data-ng-model="create.text"></textarea>
			</div>
			<savebutton id="sendmessage" data-state="sendMessageState" data-ng-click="create.send(create.users, create.text, create.images)">
				<span data-i18n="messages.sendMessage.send"></span>
			</savebutton>
			<div id="messagesView-newMessageImages" data-ng-class="{'messagesView-newMessageImages--active animate-heightAndOverflow animate--fill': create.images.length > 0}">
				<div class="newsfeed-newPostImagePreview" data-ng-repeat="image in create.images">
					<button class="newsfeed-newPostImageRemove fa fa-times-circle" data-ng-click='create.removeImage($index)'></button>
					<img class="newsfeed-newPostImage" alt="{{image.getName()}}" data-ng-src="{{image.getUrl()}}">
					<progress class="newsfeed-newPostImageProgress" value="{{image.getProgress()*100}}" max="100"></progress>
				</div>
			</div>
		</form>
	</div>
</div>
